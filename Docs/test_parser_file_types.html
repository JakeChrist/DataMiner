<!-- Generated by DocGen-LM -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>test_parser_file_types</title>
    <link rel="stylesheet" href="static/style.css">
</head>
<body>
    <button id="sidebar-toggle">Menu</button>
    <div class="sidebar">
        <h2>Navigation</h2>
        <ul><li><a href="index.html"><strong>üè† Project Overview</strong></a></li><li><details><summary>app</summary><ul><li><a href="__init__.html">__init__</a></li><li><a href="__main__.html">__main__</a></li><li><a href="config.html">config</a></li><li><a href="logging.html">logging</a></li><li><details><summary>ingest</summary><ul><li><a href="__init__.html">__init__</a></li><li><a href="preview.html">preview</a></li><li><a href="service.html">service</a></li><li><details><summary>parsers</summary><ul><li><a href="__init__.html">__init__</a></li><li><a href="docx_parser.html">docx_parser</a></li><li><a href="markdown_parser.html">markdown_parser</a></li><li><a href="pdf_parser.html">pdf_parser</a></li><li><a href="text_parser.html">text_parser</a></li></ul></details></li></ul></details></li><li><details><summary>retrieval</summary><ul><li><a href="__init__.html">__init__</a></li><li><a href="index.html">index</a></li><li><a href="search.html">search</a></li></ul></details></li><li><details><summary>services</summary><ul><li><a href="__init__.html">__init__</a></li><li><a href="backup_service.html">backup_service</a></li><li><a href="conversation_manager.html">conversation_manager</a></li><li><a href="conversation_settings.html">conversation_settings</a></li><li><a href="document_hierarchy.html">document_hierarchy</a></li><li><a href="export_service.html">export_service</a></li><li><a href="lmstudio_client.html">lmstudio_client</a></li><li><a href="progress_service.html">progress_service</a></li><li><a href="project_service.html">project_service</a></li><li><a href="settings_service.html">settings_service</a></li></ul></details></li><li><details><summary>storage</summary><ul><li><a href="__init__.html">__init__</a></li><li><a href="database.html">database</a></li></ul></details></li><li><details><summary>ui</summary><ul><li><a href="__init__.html">__init__</a></li><li><a href="answer_view.html">answer_view</a></li><li><a href="evidence_panel.html">evidence_panel</a></li><li><a href="main_window.html">main_window</a></li><li><a href="question_input_widget.html">question_input_widget</a></li></ul></details></li></ul></details></li><li><details><summary>tests</summary><ul><li><a href="test_dynamic_planning.html">test_dynamic_planning</a></li><li><a href="test_export_and_backup.html">test_export_and_backup</a></li><li><a href="test_ingest_service.html">test_ingest_service</a></li><li><a href="test_lmstudio_integration.html">test_lmstudio_integration</a></li><li><a href="test_parser_file_types.html">test_parser_file_types</a></li><li><a href="test_preview_service.html">test_preview_service</a></li><li><a href="test_project_service.html">test_project_service</a></li><li><a href="test_retrieval_index.html">test_retrieval_index</a></li><li><a href="test_search_service.html">test_search_service</a></li><li><a href="test_storage.html">test_storage</a></li><li><a href="test_ui_main_window.html">test_ui_main_window</a></li></ul></details></li></ul>
    </div>
    <div class="content">
        <h1>test_parser_file_types</h1>
        <p>Test function that verifies file parsing functionality for different code and markup file types. Tests HTML, Python, MATLAB, and C++ files with specific content patterns. For each file type, creates a temporary file with sample content, parses it using the parse_file function, and validates that the parsed text contains the first line of the original content and that the encoding metadata matches UTF-8. Uses pytest-style testing with parameterized file extensions and content samples.</p>
<h2>Functions</h2>
<h3 id="test_parse_file_supports_code_and_markup">test_parse_file_supports_code_and_markup(tmp_path: Path) -&gt; None</h3>
<p>The function `test_parse_file_supports_code_and_markup` tests the ability of the `parse_file` function to correctly process and extract text from files with specific code and markup file extensions. It creates temporary files with sample content for HTML, Python, MATLAB, and C++ formats, then verifies that the parsed output contains the expected first line of the original content and that the encoding metadata is correctly identified as UTF-8. The test ensures support for various programming and markup languages within the document parsing system.</p>
<pre><code><span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">test_parse_file_supports_code_and_markup</span>(tmp_path: Path) <span style="color: #666666">-&gt;</span> <span style="color: #008000; font-weight: bold">None</span>:
    samples <span style="color: #666666">=</span> {
        <span style="color: #BA2121">&quot;.html&quot;</span>: <span style="color: #BA2121">&quot;&lt;html&gt;&lt;body&gt;Sample HTML&lt;/body&gt;&lt;/html&gt;&quot;</span>,
        <span style="color: #BA2121">&quot;.py&quot;</span>: <span style="color: #BA2121">&quot;print(&#39;sample python file&#39;)</span><span style="color: #AA5D1F; font-weight: bold">\n</span><span style="color: #BA2121">&quot;</span>,
        <span style="color: #BA2121">&quot;.m&quot;</span>: <span style="color: #BA2121">&quot;function y = square(x)</span><span style="color: #AA5D1F; font-weight: bold">\n</span><span style="color: #BA2121">    y = x.^2;</span><span style="color: #AA5D1F; font-weight: bold">\n</span><span style="color: #BA2121">end</span><span style="color: #AA5D1F; font-weight: bold">\n</span><span style="color: #BA2121">&quot;</span>,
        <span style="color: #BA2121">&quot;.cpp&quot;</span>: <span style="color: #BA2121">&quot;#include &lt;iostream&gt;</span><span style="color: #AA5D1F; font-weight: bold">\n</span><span style="color: #BA2121">int main() { return 0; }</span><span style="color: #AA5D1F; font-weight: bold">\n</span><span style="color: #BA2121">&quot;</span>,
    }

    <span style="color: #008000; font-weight: bold">for</span> suffix, content <span style="color: #AA22FF; font-weight: bold">in</span> samples<span style="color: #666666">.</span>items():
        path <span style="color: #666666">=</span> tmp_path <span style="color: #666666">/</span> <span style="color: #BA2121">f&quot;document</span><span style="color: #A45A77; font-weight: bold">{</span>suffix<span style="color: #A45A77; font-weight: bold">}</span><span style="color: #BA2121">&quot;</span>
        path<span style="color: #666666">.</span>write_text(content, encoding<span style="color: #666666">=</span><span style="color: #BA2121">&quot;utf-8&quot;</span>)

        parsed <span style="color: #666666">=</span> parse_file(path)

        <span style="color: #008000; font-weight: bold">assert</span> content<span style="color: #666666">.</span>strip()<span style="color: #666666">.</span>splitlines()[<span style="color: #666666">0</span>] <span style="color: #AA22FF; font-weight: bold">in</span> parsed<span style="color: #666666">.</span>text
        <span style="color: #008000; font-weight: bold">assert</span> parsed<span style="color: #666666">.</span>metadata[<span style="color: #BA2121">&quot;encoding&quot;</span>]<span style="color: #666666">.</span>lower() <span style="color: #666666">==</span> <span style="color: #BA2121">&quot;utf-8&quot;</span>
</code></pre>
    </div>
    <script src="static/toggle.js"></script>
</body>
</html>
