<!-- Generated by DocGen-LM -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>logging</title>
    <link rel="stylesheet" href="static/style.css">
</head>
<body>
    <button id="sidebar-toggle">Menu</button>
    <div class="sidebar">
        <h2>Navigation</h2>
        <ul><li><a href="index.html"><strong>üè† Project Overview</strong></a></li><li><details><summary>app</summary><ul><li><a href="__init__.html">__init__</a></li><li><a href="__main__.html">__main__</a></li><li><a href="config.html">config</a></li><li><a href="logging.html">logging</a></li><li><details><summary>ingest</summary><ul><li><a href="__init__.html">__init__</a></li><li><a href="preview.html">preview</a></li><li><a href="service.html">service</a></li><li><details><summary>parsers</summary><ul><li><a href="__init__.html">__init__</a></li><li><a href="docx_parser.html">docx_parser</a></li><li><a href="markdown_parser.html">markdown_parser</a></li><li><a href="pdf_parser.html">pdf_parser</a></li><li><a href="text_parser.html">text_parser</a></li></ul></details></li></ul></details></li><li><details><summary>retrieval</summary><ul><li><a href="__init__.html">__init__</a></li><li><a href="index.html">index</a></li><li><a href="search.html">search</a></li></ul></details></li><li><details><summary>services</summary><ul><li><a href="__init__.html">__init__</a></li><li><a href="backup_service.html">backup_service</a></li><li><a href="conversation_manager.html">conversation_manager</a></li><li><a href="conversation_settings.html">conversation_settings</a></li><li><a href="document_hierarchy.html">document_hierarchy</a></li><li><a href="export_service.html">export_service</a></li><li><a href="lmstudio_client.html">lmstudio_client</a></li><li><a href="progress_service.html">progress_service</a></li><li><a href="project_service.html">project_service</a></li><li><a href="settings_service.html">settings_service</a></li></ul></details></li><li><details><summary>storage</summary><ul><li><a href="__init__.html">__init__</a></li><li><a href="database.html">database</a></li></ul></details></li><li><details><summary>ui</summary><ul><li><a href="__init__.html">__init__</a></li><li><a href="answer_view.html">answer_view</a></li><li><a href="evidence_panel.html">evidence_panel</a></li><li><a href="main_window.html">main_window</a></li><li><a href="question_input_widget.html">question_input_widget</a></li></ul></details></li></ul></details></li><li><details><summary>tests</summary><ul><li><a href="test_dynamic_planning.html">test_dynamic_planning</a></li><li><a href="test_export_and_backup.html">test_export_and_backup</a></li><li><a href="test_ingest_service.html">test_ingest_service</a></li><li><a href="test_lmstudio_integration.html">test_lmstudio_integration</a></li><li><a href="test_parser_file_types.html">test_parser_file_types</a></li><li><a href="test_preview_service.html">test_preview_service</a></li><li><a href="test_project_service.html">test_project_service</a></li><li><a href="test_retrieval_index.html">test_retrieval_index</a></li><li><a href="test_search_service.html">test_search_service</a></li><li><a href="test_storage.html">test_storage</a></li><li><a href="test_ui_main_window.html">test_ui_main_window</a></li></ul></details></li></ul>
    </div>
    <div class="content">
        <h1>logging</h1>
        <p>Module defines logging configuration for the DataMiner application. Creates a function that initializes logging with both file and console output. Uses rotating file handler to manage log file size and retention. Configures logging format with timestamp, logger name, level, and message. Stores logs in user&#x27;s configuration directory. Sets up debug-level logging by default. Returns configured logger instance.</p>
<h2>Functions</h2>
<h3 id="setup_logging">setup_logging(app_name: str=&#x27;DataMiner&#x27;, *, level: int=logging.INFO, log_filename: Optional[str]=None) -&gt; logging.Logger</h3>
<p>The function `setup_logging` configures application logging with both file and console output, using a rotating file handler to manage log file size. It creates a logger for the specified application name, ensures no duplicate handlers are added, and sets up formatters for consistent log message structure. Logs are written to a rotating file in the user&#x27;s configuration directory, with optional customization of logging level and log filename. The function returns the configured logger instance.</p>
<pre><code><span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">setup_logging</span>(
    app_name: <span style="color: #008000">str</span> <span style="color: #666666">=</span> <span style="color: #BA2121">&quot;DataMiner&quot;</span>,
    <span style="color: #666666">*</span>,
    level: <span style="color: #008000">int</span> <span style="color: #666666">=</span> logging<span style="color: #666666">.</span>INFO,
    log_filename: Optional[<span style="color: #008000">str</span>] <span style="color: #666666">=</span> <span style="color: #008000; font-weight: bold">None</span>,
) <span style="color: #666666">-&gt;</span> logging<span style="color: #666666">.</span>Logger:
<span style="color: #bbbbbb">    </span><span style="color: #BA2121; font-style: italic">&quot;&quot;&quot;Configure logging for the application and return the root logger.</span>

<span style="color: #BA2121; font-style: italic">    Logging output is directed to both the console and a rotating file located</span>
<span style="color: #BA2121; font-style: italic">    in the user&#39;s configuration directory. This utility avoids any external</span>
<span style="color: #BA2121; font-style: italic">    telemetry by keeping all logs on the local filesystem.</span>
<span style="color: #BA2121; font-style: italic">    &quot;&quot;&quot;</span>
    logger <span style="color: #666666">=</span> logging<span style="color: #666666">.</span>getLogger(app_name)
    <span style="color: #008000; font-weight: bold">if</span> logger<span style="color: #666666">.</span>handlers:
        <span style="color: #008000; font-weight: bold">return</span> logger

    logger<span style="color: #666666">.</span>setLevel(level)
    formatter <span style="color: #666666">=</span> logging<span style="color: #666666">.</span>Formatter(
        <span style="color: #BA2121">&quot;</span><span style="color: #A45A77; font-weight: bold">%(asctime)s</span><span style="color: #BA2121"> - </span><span style="color: #A45A77; font-weight: bold">%(name)s</span><span style="color: #BA2121"> - </span><span style="color: #A45A77; font-weight: bold">%(levelname)s</span><span style="color: #BA2121"> - </span><span style="color: #A45A77; font-weight: bold">%(message)s</span><span style="color: #BA2121">&quot;</span>,
        datefmt<span style="color: #666666">=</span><span style="color: #BA2121">&quot;%Y-%m-</span><span style="color: #A45A77; font-weight: bold">%d</span><span style="color: #BA2121"> %H:%M:%S&quot;</span>,
    )

    config_dir <span style="color: #666666">=</span> get_user_config_dir(app_name)
    log_path <span style="color: #666666">=</span> Path(config_dir) <span style="color: #666666">/</span> (log_filename <span style="color: #AA22FF; font-weight: bold">or</span> LOG_FILENAME)

    file_handler <span style="color: #666666">=</span> RotatingFileHandler(
        log_path,
        maxBytes<span style="color: #666666">=</span>MAX_BYTES,
        backupCount<span style="color: #666666">=</span>BACKUP_COUNT,
        encoding<span style="color: #666666">=</span><span style="color: #BA2121">&quot;utf-8&quot;</span>,
    )
    file_handler<span style="color: #666666">.</span>setFormatter(formatter)
    logger<span style="color: #666666">.</span>addHandler(file_handler)

    console_handler <span style="color: #666666">=</span> logging<span style="color: #666666">.</span>StreamHandler()
    console_handler<span style="color: #666666">.</span>setFormatter(formatter)
    logger<span style="color: #666666">.</span>addHandler(console_handler)

    logger<span style="color: #666666">.</span>debug(<span style="color: #BA2121">&quot;Logging initialised. Writing to </span><span style="color: #A45A77; font-weight: bold">%s</span><span style="color: #BA2121">&quot;</span>, log_path)
    <span style="color: #008000; font-weight: bold">return</span> logger
</code></pre>
    </div>
    <script src="static/toggle.js"></script>
</body>
</html>
