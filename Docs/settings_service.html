<!-- Generated by DocGen-LM -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>settings_service</title>
    <link rel="stylesheet" href="static/style.css">
</head>
<body>
    <button id="sidebar-toggle">Menu</button>
    <div class="sidebar">
        <h2>Navigation</h2>
        <ul><li><a href="index.html"><strong>üè† Project Overview</strong></a></li><li><details><summary>app</summary><ul><li><a href="__init__.html">__init__</a></li><li><a href="__main__.html">__main__</a></li><li><a href="config.html">config</a></li><li><a href="logging.html">logging</a></li><li><details><summary>ingest</summary><ul><li><a href="__init__.html">__init__</a></li><li><a href="preview.html">preview</a></li><li><a href="service.html">service</a></li><li><details><summary>parsers</summary><ul><li><a href="__init__.html">__init__</a></li><li><a href="docx_parser.html">docx_parser</a></li><li><a href="markdown_parser.html">markdown_parser</a></li><li><a href="pdf_parser.html">pdf_parser</a></li><li><a href="text_parser.html">text_parser</a></li></ul></details></li></ul></details></li><li><details><summary>retrieval</summary><ul><li><a href="__init__.html">__init__</a></li><li><a href="index.html">index</a></li><li><a href="search.html">search</a></li></ul></details></li><li><details><summary>services</summary><ul><li><a href="__init__.html">__init__</a></li><li><a href="backup_service.html">backup_service</a></li><li><a href="conversation_manager.html">conversation_manager</a></li><li><a href="conversation_settings.html">conversation_settings</a></li><li><a href="document_hierarchy.html">document_hierarchy</a></li><li><a href="export_service.html">export_service</a></li><li><a href="lmstudio_client.html">lmstudio_client</a></li><li><a href="progress_service.html">progress_service</a></li><li><a href="project_service.html">project_service</a></li><li><a href="settings_service.html">settings_service</a></li></ul></details></li><li><details><summary>storage</summary><ul><li><a href="__init__.html">__init__</a></li><li><a href="database.html">database</a></li></ul></details></li><li><details><summary>ui</summary><ul><li><a href="__init__.html">__init__</a></li><li><a href="answer_view.html">answer_view</a></li><li><a href="evidence_panel.html">evidence_panel</a></li><li><a href="main_window.html">main_window</a></li><li><a href="question_input_widget.html">question_input_widget</a></li></ul></details></li></ul></details></li><li><details><summary>tests</summary><ul><li><a href="test_dynamic_planning.html">test_dynamic_planning</a></li><li><a href="test_export_and_backup.html">test_export_and_backup</a></li><li><a href="test_ingest_service.html">test_ingest_service</a></li><li><a href="test_lmstudio_integration.html">test_lmstudio_integration</a></li><li><a href="test_parser_file_types.html">test_parser_file_types</a></li><li><a href="test_preview_service.html">test_preview_service</a></li><li><a href="test_project_service.html">test_project_service</a></li><li><a href="test_retrieval_index.html">test_retrieval_index</a></li><li><a href="test_search_service.html">test_search_service</a></li><li><a href="test_storage.html">test_storage</a></li><li><a href="test_ui_main_window.html">test_ui_main_window</a></li></ul></details></li></ul>
    </div>
    <div class="content">
        <h1>settings_service</h1>
        <p>Defines UI settings management for a PyQt6 application, including theme, font scaling, density, and panel visibility. Provides persistence through a configuration manager and emits signals on setting changes. Includes methods to apply theme and font scale to the QApplication instance. Settings are stored and loaded as a dictionary with keys for theme, font_scale, density, splitter_sizes, show_corpus_panel, and show_evidence_panel. The UISettings dataclass holds default values for these settings. The SettingsService class manages loading, saving, and updating settings, with validation and clamping for numeric values. Theme application involves setting QPalette colors and a stylesheet. Font scaling adjusts the QApplication&#x27;s default font size based on a base point size and scale factor.</p>
<h2 id="UISettings">Class: UISettings</h2>
<p>The `UISettings` class defines a container for storing and managing user interface configuration values. It includes attributes for theme, font scaling, density, splitter sizes, and panel visibility options. The class uses default values for all settings and is intended to persist UI state across application sessions.</p>
<h2 id="SettingsService">Class: SettingsService</h2>
<p>The `SettingsService` class manages UI-level configuration settings, including theme, font scale, and panel visibility, with persistence and broadcasting capabilities. It loads and saves settings to disk using a `ConfigManager`, and provides methods to update and apply these settings to the application&#x27;s UI components. The class emits signals when settings change and supports applying themes and font scaling to a `QApplication` instance.</p>
<h3 id="__init__">Method: __init__(self, config_manager: ConfigManager | None=None) -&gt; None</h3>
<p>Initializes the `SettingsService` instance. Sets up the configuration manager, UI settings, and base font point size. Calls `reload()` to initialize the service&#x27;s state.</p>
<pre><code><span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">__init__</span>(<span style="color: #008000">self</span>, config_manager: ConfigManager <span style="color: #666666">|</span> <span style="color: #008000; font-weight: bold">None</span> <span style="color: #666666">=</span> <span style="color: #008000; font-weight: bold">None</span>) <span style="color: #666666">-&gt;</span> <span style="color: #008000; font-weight: bold">None</span>:
        <span style="color: #008000">super</span>()<span style="color: #666666">.</span><span style="color: #0000FF">__init__</span>()
        <span style="color: #008000">self</span><span style="color: #666666">.</span>_config <span style="color: #666666">=</span> config_manager <span style="color: #AA22FF; font-weight: bold">or</span> ConfigManager()
        <span style="color: #008000">self</span><span style="color: #666666">.</span>_settings <span style="color: #666666">=</span> UISettings()
        <span style="color: #008000">self</span><span style="color: #666666">.</span>_base_font_point_size: <span style="color: #008000">float</span> <span style="color: #666666">|</span> <span style="color: #008000; font-weight: bold">None</span> <span style="color: #666666">=</span> <span style="color: #008000; font-weight: bold">None</span>
        <span style="color: #008000">self</span><span style="color: #666666">.</span>reload()
</code></pre>
<h3 id="reload">Method: reload(self) -&gt; None</h3>
<p>The `reload` method in the `SettingsService` class loads UI settings from persistent storage and applies default values or validation where necessary. It retrieves configuration data, ensures it is a dictionary, and extracts UI-specific settings such as theme, font scale, density, splitter sizes, and panel visibility flags. Invalid or missing values are replaced with defaults, and numeric values are clamped to valid ranges. The method then constructs an `UISettings` object with the processed values and updates the internal `_settings` attribute. It also resets the base font point size to `None`.</p>
<pre><code><span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">reload</span>(<span style="color: #008000">self</span>) <span style="color: #666666">-&gt;</span> <span style="color: #008000; font-weight: bold">None</span>:
<span style="color: #bbbbbb">        </span><span style="color: #BA2121; font-style: italic">&quot;&quot;&quot;Reload settings from disk.&quot;&quot;&quot;</span>

        data <span style="color: #666666">=</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>_config<span style="color: #666666">.</span>load()
        <span style="color: #008000; font-weight: bold">if</span> <span style="color: #AA22FF; font-weight: bold">not</span> <span style="color: #008000">isinstance</span>(data, <span style="color: #008000">dict</span>):
            data <span style="color: #666666">=</span> {}
        ui_settings <span style="color: #666666">=</span> data<span style="color: #666666">.</span>get(<span style="color: #BA2121">&quot;ui&quot;</span>, {})
        <span style="color: #008000; font-weight: bold">if</span> <span style="color: #AA22FF; font-weight: bold">not</span> <span style="color: #008000">isinstance</span>(ui_settings, <span style="color: #008000">dict</span>):
            ui_settings <span style="color: #666666">=</span> {}
        theme <span style="color: #666666">=</span> <span style="color: #008000">str</span>(ui_settings<span style="color: #666666">.</span>get(<span style="color: #BA2121">&quot;theme&quot;</span>, DEFAULT_THEME))<span style="color: #666666">.</span>lower()
        <span style="color: #008000; font-weight: bold">if</span> theme <span style="color: #AA22FF; font-weight: bold">not</span> <span style="color: #AA22FF; font-weight: bold">in</span> {<span style="color: #BA2121">&quot;light&quot;</span>, <span style="color: #BA2121">&quot;dark&quot;</span>}:
            theme <span style="color: #666666">=</span> DEFAULT_THEME
        font_scale <span style="color: #666666">=</span> ui_settings<span style="color: #666666">.</span>get(<span style="color: #BA2121">&quot;font_scale&quot;</span>, <span style="color: #666666">1.0</span>)
        <span style="color: #008000; font-weight: bold">try</span>:
            font_scale <span style="color: #666666">=</span> <span style="color: #008000">float</span>(font_scale)
        <span style="color: #008000; font-weight: bold">except</span> (<span style="color: #CB3F38; font-weight: bold">TypeError</span>, <span style="color: #CB3F38; font-weight: bold">ValueError</span>):
            font_scale <span style="color: #666666">=</span> <span style="color: #666666">1.0</span>
        font_scale <span style="color: #666666">=</span> _clamp(font_scale, low<span style="color: #666666">=</span>MIN_FONT_SCALE, high<span style="color: #666666">=</span>MAX_FONT_SCALE)
        density <span style="color: #666666">=</span> <span style="color: #008000">str</span>(ui_settings<span style="color: #666666">.</span>get(<span style="color: #BA2121">&quot;density&quot;</span>, DEFAULT_DENSITY))<span style="color: #666666">.</span>lower()
        <span style="color: #008000; font-weight: bold">if</span> density <span style="color: #AA22FF; font-weight: bold">not</span> <span style="color: #AA22FF; font-weight: bold">in</span> {<span style="color: #BA2121">&quot;compact&quot;</span>, <span style="color: #BA2121">&quot;comfortable&quot;</span>}:
            density <span style="color: #666666">=</span> DEFAULT_DENSITY
        splitter <span style="color: #666666">=</span> ui_settings<span style="color: #666666">.</span>get(<span style="color: #BA2121">&quot;splitter_sizes&quot;</span>)
        <span style="color: #008000; font-weight: bold">if</span> (
            <span style="color: #008000">isinstance</span>(splitter, (<span style="color: #008000">list</span>, <span style="color: #008000">tuple</span>))
            <span style="color: #AA22FF; font-weight: bold">and</span> <span style="color: #008000">len</span>(splitter) <span style="color: #666666">==</span> <span style="color: #666666">3</span>
            <span style="color: #AA22FF; font-weight: bold">and</span> <span style="color: #008000">all</span>(<span style="color: #008000">isinstance</span>(value, (<span style="color: #008000">int</span>, <span style="color: #008000">float</span>)) <span style="color: #008000; font-weight: bold">for</span> value <span style="color: #AA22FF; font-weight: bold">in</span> splitter)
        ):
            splitter_sizes <span style="color: #666666">=</span> <span style="color: #008000">tuple</span>(<span style="color: #008000">int</span>(<span style="color: #008000">max</span>(<span style="color: #666666">80</span>, value)) <span style="color: #008000; font-weight: bold">for</span> value <span style="color: #AA22FF; font-weight: bold">in</span> splitter)  <span style="color: #3D7B7B; font-style: italic"># type: ignore[assignment]</span>
        <span style="color: #008000; font-weight: bold">else</span>:
            splitter_sizes <span style="color: #666666">=</span> DEFAULT_SPLITTER_SIZES
        show_corpus <span style="color: #666666">=</span> <span style="color: #008000">bool</span>(ui_settings<span style="color: #666666">.</span>get(<span style="color: #BA2121">&quot;show_corpus_panel&quot;</span>, <span style="color: #008000; font-weight: bold">True</span>))
        show_evidence <span style="color: #666666">=</span> <span style="color: #008000">bool</span>(ui_settings<span style="color: #666666">.</span>get(<span style="color: #BA2121">&quot;show_evidence_panel&quot;</span>, <span style="color: #008000; font-weight: bold">True</span>))
        <span style="color: #008000">self</span><span style="color: #666666">.</span>_settings <span style="color: #666666">=</span> UISettings(
            theme<span style="color: #666666">=</span>theme,
            font_scale<span style="color: #666666">=</span>font_scale,
            density<span style="color: #666666">=</span>density,
            splitter_sizes<span style="color: #666666">=</span>splitter_sizes,
            show_corpus_panel<span style="color: #666666">=</span>show_corpus,
            show_evidence_panel<span style="color: #666666">=</span>show_evidence,
        )
        <span style="color: #008000">self</span><span style="color: #666666">.</span>_base_font_point_size <span style="color: #666666">=</span> <span style="color: #008000; font-weight: bold">None</span>
</code></pre>
<h3 id="save">Method: save(self) -&gt; None</h3>
<p>The `save` method persists the current settings to disk by loading existing configuration data, updating the UI-related settings with values from `_settings`, and then saving the modified data back to the configuration file. The UI settings updated include theme, font scale, density, splitter sizes, and visibility toggles for corpus and evidence panels.</p>
<pre><code><span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">save</span>(<span style="color: #008000">self</span>) <span style="color: #666666">-&gt;</span> <span style="color: #008000; font-weight: bold">None</span>:
<span style="color: #bbbbbb">        </span><span style="color: #BA2121; font-style: italic">&quot;&quot;&quot;Persist the current settings to disk.&quot;&quot;&quot;</span>

        data <span style="color: #666666">=</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>_config<span style="color: #666666">.</span>load()
        <span style="color: #008000; font-weight: bold">if</span> <span style="color: #AA22FF; font-weight: bold">not</span> <span style="color: #008000">isinstance</span>(data, <span style="color: #008000">dict</span>):
            data <span style="color: #666666">=</span> {}
        ui_data <span style="color: #666666">=</span> data<span style="color: #666666">.</span>get(<span style="color: #BA2121">&quot;ui&quot;</span>)
        <span style="color: #008000; font-weight: bold">if</span> <span style="color: #AA22FF; font-weight: bold">not</span> <span style="color: #008000">isinstance</span>(ui_data, <span style="color: #008000">dict</span>):
            ui_data <span style="color: #666666">=</span> {}
        ui_data<span style="color: #666666">.</span>update(
            {
                <span style="color: #BA2121">&quot;theme&quot;</span>: <span style="color: #008000">self</span><span style="color: #666666">.</span>_settings<span style="color: #666666">.</span>theme,
                <span style="color: #BA2121">&quot;font_scale&quot;</span>: <span style="color: #008000">self</span><span style="color: #666666">.</span>_settings<span style="color: #666666">.</span>font_scale,
                <span style="color: #BA2121">&quot;density&quot;</span>: <span style="color: #008000">self</span><span style="color: #666666">.</span>_settings<span style="color: #666666">.</span>density,
                <span style="color: #BA2121">&quot;splitter_sizes&quot;</span>: <span style="color: #008000">list</span>(<span style="color: #008000">self</span><span style="color: #666666">.</span>_settings<span style="color: #666666">.</span>splitter_sizes),
                <span style="color: #BA2121">&quot;show_corpus_panel&quot;</span>: <span style="color: #008000">self</span><span style="color: #666666">.</span>_settings<span style="color: #666666">.</span>show_corpus_panel,
                <span style="color: #BA2121">&quot;show_evidence_panel&quot;</span>: <span style="color: #008000">self</span><span style="color: #666666">.</span>_settings<span style="color: #666666">.</span>show_evidence_panel,
            }
        )
        data[<span style="color: #BA2121">&quot;ui&quot;</span>] <span style="color: #666666">=</span> ui_data
        <span style="color: #008000">self</span><span style="color: #666666">.</span>_config<span style="color: #666666">.</span>save(data)
</code></pre>
<h3 id="theme">Method: theme(self) -&gt; str</h3>
<p>The `theme` function is a property method within the `SettingsService` class that retrieves and returns the current theme setting. It accesses the `_settings` attribute of the class instance and returns the value of its `theme` property. This function provides read-only access to the application&#x27;s visual theme configuration.</p>
<pre><code><span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">theme</span>(<span style="color: #008000">self</span>) <span style="color: #666666">-&gt;</span> <span style="color: #008000">str</span>:
        <span style="color: #008000; font-weight: bold">return</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>_settings<span style="color: #666666">.</span>theme
</code></pre>
<h3 id="font_scale">Method: font_scale(self) -&gt; float</h3>
<p>The function `font_scale` is a property method within the `SettingsService` class that retrieves and returns the value of `font_scale` from the `_settings` attribute. This value represents a scaling factor for font sizes, likely used to adjust the visual appearance of text in the application&#x27;s user interface.</p>
<pre><code><span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">font_scale</span>(<span style="color: #008000">self</span>) <span style="color: #666666">-&gt;</span> <span style="color: #008000">float</span>:
        <span style="color: #008000; font-weight: bold">return</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>_settings<span style="color: #666666">.</span>font_scale
</code></pre>
<h3 id="density">Method: density(self) -&gt; str</h3>
<p>The function `density` is a property method within the `SettingsService` class that retrieves and returns the value of the `density` attribute from the `_settings` object. The returned value is a string representing the density setting.</p>
<pre><code><span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">density</span>(<span style="color: #008000">self</span>) <span style="color: #666666">-&gt;</span> <span style="color: #008000">str</span>:
        <span style="color: #008000; font-weight: bold">return</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>_settings<span style="color: #666666">.</span>density
</code></pre>
<h3 id="splitter_sizes">Method: splitter_sizes(self) -&gt; tuple[int, int, int]</h3>
<p>Returns a tuple of three integers representing the splitter sizes stored in the settings.</p>
<pre><code><span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">splitter_sizes</span>(<span style="color: #008000">self</span>) <span style="color: #666666">-&gt;</span> <span style="color: #008000">tuple</span>[<span style="color: #008000">int</span>, <span style="color: #008000">int</span>, <span style="color: #008000">int</span>]:
        <span style="color: #008000; font-weight: bold">return</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>_settings<span style="color: #666666">.</span>splitter_sizes
</code></pre>
<h3 id="show_corpus_panel">Method: show_corpus_panel(self) -&gt; bool</h3>
<p>The function `show_corpus_panel` is a getter method that returns the value of the boolean attribute `_settings.show_corpus_panel`. This attribute likely controls whether a corpus panel is displayed in the application&#x27;s user interface. The method itself does not perform any operations beyond retrieving and returning this setting value.</p>
<pre><code><span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">show_corpus_panel</span>(<span style="color: #008000">self</span>) <span style="color: #666666">-&gt;</span> <span style="color: #008000">bool</span>:
        <span style="color: #008000; font-weight: bold">return</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>_settings<span style="color: #666666">.</span>show_corpus_panel
</code></pre>
<h3 id="show_evidence_panel">Method: show_evidence_panel(self) -&gt; bool</h3>
<p>The function `show_evidence_panel` is a getter method that retrieves the current state of the `show_evidence_panel` setting from the internal `_settings` object. It returns a boolean value indicating whether the evidence panel should be displayed.</p>
<pre><code><span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">show_evidence_panel</span>(<span style="color: #008000">self</span>) <span style="color: #666666">-&gt;</span> <span style="color: #008000">bool</span>:
        <span style="color: #008000; font-weight: bold">return</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>_settings<span style="color: #666666">.</span>show_evidence_panel
</code></pre>
<h3 id="set_theme">Method: set_theme(self, theme: str) -&gt; None</h3>
<p>The `set_theme` function in the `SettingsService` class updates the application&#x27;s theme to either &quot;dark&quot; or &quot;light&quot; based on the provided input. It normalizes the input string to ensure consistent formatting, checks if the theme has changed, and if so, updates the internal settings, saves the change, and emits a signal indicating the theme has been updated.</p>
<pre><code><span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">set_theme</span>(<span style="color: #008000">self</span>, theme: <span style="color: #008000">str</span>) <span style="color: #666666">-&gt;</span> <span style="color: #008000; font-weight: bold">None</span>:
        normalized <span style="color: #666666">=</span> <span style="color: #BA2121">&quot;dark&quot;</span> <span style="color: #008000; font-weight: bold">if</span> <span style="color: #008000">str</span>(theme)<span style="color: #666666">.</span>lower() <span style="color: #666666">==</span> <span style="color: #BA2121">&quot;dark&quot;</span> <span style="color: #008000; font-weight: bold">else</span> <span style="color: #BA2121">&quot;light&quot;</span>
        <span style="color: #008000; font-weight: bold">if</span> normalized <span style="color: #666666">==</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>_settings<span style="color: #666666">.</span>theme:
            <span style="color: #008000; font-weight: bold">return</span>
        <span style="color: #008000">self</span><span style="color: #666666">.</span>_settings<span style="color: #666666">.</span>theme <span style="color: #666666">=</span> normalized
        <span style="color: #008000">self</span><span style="color: #666666">.</span>save()
        <span style="color: #008000">self</span><span style="color: #666666">.</span>theme_changed<span style="color: #666666">.</span>emit(normalized)
</code></pre>
<h3 id="toggle_theme">Method: toggle_theme(self) -&gt; None</h3>
<p>The `toggle_theme` function switches the application&#x27;s theme between &quot;light&quot; and &quot;dark&quot; modes. It checks the current theme stored in `self._settings.theme`, and if it is &quot;light&quot;, it sets the theme to &quot;dark&quot;, otherwise it sets it to &quot;light&quot;. The actual theme change is performed by calling `self.set_theme()` with the new theme string.</p>
<pre><code><span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">toggle_theme</span>(<span style="color: #008000">self</span>) <span style="color: #666666">-&gt;</span> <span style="color: #008000; font-weight: bold">None</span>:
        <span style="color: #008000">self</span><span style="color: #666666">.</span>set_theme(<span style="color: #BA2121">&quot;dark&quot;</span> <span style="color: #008000; font-weight: bold">if</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>_settings<span style="color: #666666">.</span>theme <span style="color: #666666">==</span> <span style="color: #BA2121">&quot;light&quot;</span> <span style="color: #008000; font-weight: bold">else</span> <span style="color: #BA2121">&quot;light&quot;</span>)
</code></pre>
<h3 id="set_font_scale">Method: set_font_scale(self, scale: float) -&gt; None</h3>
<p>The function `set_font_scale` updates the font scale setting of the application. It accepts a scale value, validates it as a float, clamps it within predefined minimum and maximum bounds, and only applies the change if the new value differs from the current setting. Upon updating, it saves the setting and emits a signal indicating the font scale has changed.</p>
<pre><code><span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">set_font_scale</span>(<span style="color: #008000">self</span>, scale: <span style="color: #008000">float</span>) <span style="color: #666666">-&gt;</span> <span style="color: #008000; font-weight: bold">None</span>:
        <span style="color: #008000; font-weight: bold">try</span>:
            value <span style="color: #666666">=</span> <span style="color: #008000">float</span>(scale)
        <span style="color: #008000; font-weight: bold">except</span> (<span style="color: #CB3F38; font-weight: bold">TypeError</span>, <span style="color: #CB3F38; font-weight: bold">ValueError</span>):
            <span style="color: #008000; font-weight: bold">return</span>
        value <span style="color: #666666">=</span> _clamp(value, low<span style="color: #666666">=</span>MIN_FONT_SCALE, high<span style="color: #666666">=</span>MAX_FONT_SCALE)
        <span style="color: #008000; font-weight: bold">if</span> <span style="color: #008000">abs</span>(value <span style="color: #666666">-</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>_settings<span style="color: #666666">.</span>font_scale) <span style="color: #666666">&lt;</span> <span style="color: #666666">1e-6</span>:
            <span style="color: #008000; font-weight: bold">return</span>
        <span style="color: #008000">self</span><span style="color: #666666">.</span>_settings<span style="color: #666666">.</span>font_scale <span style="color: #666666">=</span> value
        <span style="color: #008000">self</span><span style="color: #666666">.</span>save()
        <span style="color: #008000">self</span><span style="color: #666666">.</span>font_scale_changed<span style="color: #666666">.</span>emit(value)
</code></pre>
<h3 id="set_density">Method: set_density(self, density: str) -&gt; None</h3>
<p>The function `set_density` updates the density setting of the application interface to either &quot;compact&quot; or &quot;comfortable&quot;. It normalizes the input string to lowercase, validates that it is one of the allowed values, and only proceeds to update the setting if it differs from the current value. After updating, it saves the new setting and emits a signal indicating that the density has changed.</p>
<pre><code><span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">set_density</span>(<span style="color: #008000">self</span>, density: <span style="color: #008000">str</span>) <span style="color: #666666">-&gt;</span> <span style="color: #008000; font-weight: bold">None</span>:
        normalized <span style="color: #666666">=</span> <span style="color: #008000">str</span>(density)<span style="color: #666666">.</span>lower()
        <span style="color: #008000; font-weight: bold">if</span> normalized <span style="color: #AA22FF; font-weight: bold">not</span> <span style="color: #AA22FF; font-weight: bold">in</span> {<span style="color: #BA2121">&quot;compact&quot;</span>, <span style="color: #BA2121">&quot;comfortable&quot;</span>}:
            <span style="color: #008000; font-weight: bold">return</span>
        <span style="color: #008000; font-weight: bold">if</span> normalized <span style="color: #666666">==</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>_settings<span style="color: #666666">.</span>density:
            <span style="color: #008000; font-weight: bold">return</span>
        <span style="color: #008000">self</span><span style="color: #666666">.</span>_settings<span style="color: #666666">.</span>density <span style="color: #666666">=</span> normalized
        <span style="color: #008000">self</span><span style="color: #666666">.</span>save()
        <span style="color: #008000">self</span><span style="color: #666666">.</span>density_changed<span style="color: #666666">.</span>emit(normalized)
</code></pre>
<h3 id="set_splitter_sizes">Method: set_splitter_sizes(self, sizes: Iterable[int]) -&gt; None</h3>
<p>The function `set_splitter_sizes` configures the splitter sizes for the application&#x27;s layout. It accepts an iterable of integer values, ensures each value is at least 80, and validates that exactly three values are provided. If the new sizes differ from the currently stored sizes, it updates the settings and persists the change by calling `save()`.</p>
<pre><code><span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">set_splitter_sizes</span>(<span style="color: #008000">self</span>, sizes: Iterable[<span style="color: #008000">int</span>]) <span style="color: #666666">-&gt;</span> <span style="color: #008000; font-weight: bold">None</span>:
        values <span style="color: #666666">=</span> [<span style="color: #008000">int</span>(<span style="color: #008000">max</span>(<span style="color: #666666">80</span>, value)) <span style="color: #008000; font-weight: bold">for</span> value <span style="color: #AA22FF; font-weight: bold">in</span> sizes]
        <span style="color: #008000; font-weight: bold">if</span> <span style="color: #008000">len</span>(values) <span style="color: #666666">!=</span> <span style="color: #666666">3</span>:
            <span style="color: #008000; font-weight: bold">return</span>
        <span style="color: #008000; font-weight: bold">if</span> <span style="color: #008000">tuple</span>(values) <span style="color: #666666">==</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>_settings<span style="color: #666666">.</span>splitter_sizes:
            <span style="color: #008000; font-weight: bold">return</span>
        <span style="color: #008000">self</span><span style="color: #666666">.</span>_settings<span style="color: #666666">.</span>splitter_sizes <span style="color: #666666">=</span> <span style="color: #008000">tuple</span>(values)
        <span style="color: #008000">self</span><span style="color: #666666">.</span>save()
</code></pre>
<h3 id="set_show_corpus_panel">Method: set_show_corpus_panel(self, visible: bool) -&gt; None</h3>
<p>The function `set_show_corpus_panel` updates the visibility setting for the corpus panel in the application&#x27;s settings. It takes a boolean parameter `visible`, converts it to a boolean type, and checks if the value differs from the current setting. If the value is different, it updates the `_settings.show_corpus_panel` attribute with the new value and saves the updated settings.</p>
<pre><code><span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">set_show_corpus_panel</span>(<span style="color: #008000">self</span>, visible: <span style="color: #008000">bool</span>) <span style="color: #666666">-&gt;</span> <span style="color: #008000; font-weight: bold">None</span>:
        value <span style="color: #666666">=</span> <span style="color: #008000">bool</span>(visible)
        <span style="color: #008000; font-weight: bold">if</span> value <span style="color: #666666">==</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>_settings<span style="color: #666666">.</span>show_corpus_panel:
            <span style="color: #008000; font-weight: bold">return</span>
        <span style="color: #008000">self</span><span style="color: #666666">.</span>_settings<span style="color: #666666">.</span>show_corpus_panel <span style="color: #666666">=</span> value
        <span style="color: #008000">self</span><span style="color: #666666">.</span>save()
</code></pre>
<h3 id="set_show_evidence_panel">Method: set_show_evidence_panel(self, visible: bool) -&gt; None</h3>
<p>The function `set_show_evidence_panel` updates the visibility setting for the evidence panel in the application&#x27;s UI. It takes a boolean parameter `visible`, converts it to a boolean type, and checks if the value differs from the current setting stored in `self._settings.show_evidence_panel`. If the value is different, it updates the setting and triggers a save operation.</p>
<pre><code><span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">set_show_evidence_panel</span>(<span style="color: #008000">self</span>, visible: <span style="color: #008000">bool</span>) <span style="color: #666666">-&gt;</span> <span style="color: #008000; font-weight: bold">None</span>:
        value <span style="color: #666666">=</span> <span style="color: #008000">bool</span>(visible)
        <span style="color: #008000; font-weight: bold">if</span> value <span style="color: #666666">==</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>_settings<span style="color: #666666">.</span>show_evidence_panel:
            <span style="color: #008000; font-weight: bold">return</span>
        <span style="color: #008000">self</span><span style="color: #666666">.</span>_settings<span style="color: #666666">.</span>show_evidence_panel <span style="color: #666666">=</span> value
        <span style="color: #008000">self</span><span style="color: #666666">.</span>save()
</code></pre>
<h3 id="apply_theme">Method: apply_theme(self, app: QApplication | None=None) -&gt; None</h3>
<p>The function `apply_theme` configures the visual theme of a PyQt6 application by setting a color palette and stylesheet based on the current theme setting (`dark` or `light`). It defines colors for various UI elements such as window, text, buttons, highlights, and borders, and applies these to the `QApplication` instance. The function also generates a stylesheet with CSS-like rules to style widgets like `QWidget`, `QFrame`, `QTextBrowser`, `QPushButton`, `QLabel`, `QListWidget`, and `QTreeWidget` according to the selected theme. If no `QApplication` instance is provided or available, the function returns without applying changes.</p>
<pre><code><span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">apply_theme</span>(<span style="color: #008000">self</span>, app: QApplication <span style="color: #666666">|</span> <span style="color: #008000; font-weight: bold">None</span> <span style="color: #666666">=</span> <span style="color: #008000; font-weight: bold">None</span>) <span style="color: #666666">-&gt;</span> <span style="color: #008000; font-weight: bold">None</span>:
<span style="color: #bbbbbb">        </span><span style="color: #BA2121; font-style: italic">&quot;&quot;&quot;Apply the current theme palette to the ``QApplication``.&quot;&quot;&quot;</span>

        app <span style="color: #666666">=</span> app <span style="color: #AA22FF; font-weight: bold">or</span> QApplication<span style="color: #666666">.</span>instance()
        <span style="color: #008000; font-weight: bold">if</span> app <span style="color: #AA22FF; font-weight: bold">is</span> <span style="color: #008000; font-weight: bold">None</span>:
            <span style="color: #008000; font-weight: bold">return</span>
        palette <span style="color: #666666">=</span> QPalette()
        <span style="color: #008000; font-weight: bold">if</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>_settings<span style="color: #666666">.</span>theme <span style="color: #666666">==</span> <span style="color: #BA2121">&quot;dark&quot;</span>:
            window <span style="color: #666666">=</span> QColor(<span style="color: #BA2121">&quot;#10131a&quot;</span>)
            surface <span style="color: #666666">=</span> QColor(<span style="color: #BA2121">&quot;#1a1f29&quot;</span>)
            border <span style="color: #666666">=</span> QColor(<span style="color: #BA2121">&quot;#2b3240&quot;</span>)
            text <span style="color: #666666">=</span> QColor(<span style="color: #BA2121">&quot;#f2f5f9&quot;</span>)
            muted <span style="color: #666666">=</span> QColor(<span style="color: #BA2121">&quot;#bac4d4&quot;</span>)
            accent <span style="color: #666666">=</span> QColor(<span style="color: #BA2121">&quot;#d8893a&quot;</span>)
            success <span style="color: #666666">=</span> QColor(<span style="color: #BA2121">&quot;#56c28c&quot;</span>)
            warning <span style="color: #666666">=</span> QColor(<span style="color: #BA2121">&quot;#f1c04e&quot;</span>)
            error <span style="color: #666666">=</span> QColor(<span style="color: #BA2121">&quot;#f06c65&quot;</span>)
        <span style="color: #008000; font-weight: bold">else</span>:
            window <span style="color: #666666">=</span> QColor(<span style="color: #BA2121">&quot;#f4f6f9&quot;</span>)
            surface <span style="color: #666666">=</span> QColor(<span style="color: #BA2121">&quot;#ffffff&quot;</span>)
            border <span style="color: #666666">=</span> QColor(<span style="color: #BA2121">&quot;#d9dee7&quot;</span>)
            text <span style="color: #666666">=</span> QColor(<span style="color: #BA2121">&quot;#1e2430&quot;</span>)
            muted <span style="color: #666666">=</span> QColor(<span style="color: #BA2121">&quot;#566072&quot;</span>)
            accent <span style="color: #666666">=</span> QColor(<span style="color: #BA2121">&quot;#b96a1d&quot;</span>)
            success <span style="color: #666666">=</span> QColor(<span style="color: #BA2121">&quot;#2f8f58&quot;</span>)
            warning <span style="color: #666666">=</span> QColor(<span style="color: #BA2121">&quot;#d5881a&quot;</span>)
            error <span style="color: #666666">=</span> QColor(<span style="color: #BA2121">&quot;#c94b45&quot;</span>)

        palette<span style="color: #666666">.</span>setColor(QPalette<span style="color: #666666">.</span>ColorRole<span style="color: #666666">.</span>Window, window)
        palette<span style="color: #666666">.</span>setColor(QPalette<span style="color: #666666">.</span>ColorRole<span style="color: #666666">.</span>WindowText, text)
        palette<span style="color: #666666">.</span>setColor(QPalette<span style="color: #666666">.</span>ColorRole<span style="color: #666666">.</span>Base, surface)
        palette<span style="color: #666666">.</span>setColor(QPalette<span style="color: #666666">.</span>ColorRole<span style="color: #666666">.</span>AlternateBase, surface)
        palette<span style="color: #666666">.</span>setColor(QPalette<span style="color: #666666">.</span>ColorRole<span style="color: #666666">.</span>ToolTipBase, surface)
        palette<span style="color: #666666">.</span>setColor(QPalette<span style="color: #666666">.</span>ColorRole<span style="color: #666666">.</span>ToolTipText, text)
        palette<span style="color: #666666">.</span>setColor(QPalette<span style="color: #666666">.</span>ColorRole<span style="color: #666666">.</span>Text, text)
        palette<span style="color: #666666">.</span>setColor(QPalette<span style="color: #666666">.</span>ColorRole<span style="color: #666666">.</span>PlaceholderText, muted)
        palette<span style="color: #666666">.</span>setColor(QPalette<span style="color: #666666">.</span>ColorRole<span style="color: #666666">.</span>Button, surface)
        palette<span style="color: #666666">.</span>setColor(QPalette<span style="color: #666666">.</span>ColorRole<span style="color: #666666">.</span>ButtonText, text)
        palette<span style="color: #666666">.</span>setColor(QPalette<span style="color: #666666">.</span>ColorRole<span style="color: #666666">.</span>Highlight, accent)
        palette<span style="color: #666666">.</span>setColor(QPalette<span style="color: #666666">.</span>ColorRole<span style="color: #666666">.</span>HighlightedText, QColor(<span style="color: #BA2121">&quot;#0b0d11&quot;</span>))
        palette<span style="color: #666666">.</span>setColor(QPalette<span style="color: #666666">.</span>ColorRole<span style="color: #666666">.</span>BrightText, error)
        palette<span style="color: #666666">.</span>setColor(QPalette<span style="color: #666666">.</span>ColorRole<span style="color: #666666">.</span>Link, accent)
        palette<span style="color: #666666">.</span>setColor(QPalette<span style="color: #666666">.</span>ColorRole<span style="color: #666666">.</span>LinkVisited, accent<span style="color: #666666">.</span>darker(<span style="color: #666666">120</span>))
        palette<span style="color: #666666">.</span>setColor(QPalette<span style="color: #666666">.</span>ColorRole<span style="color: #666666">.</span>Light, surface<span style="color: #666666">.</span>lighter(<span style="color: #666666">105</span>))
        palette<span style="color: #666666">.</span>setColor(QPalette<span style="color: #666666">.</span>ColorRole<span style="color: #666666">.</span>Midlight, border)
        palette<span style="color: #666666">.</span>setColor(QPalette<span style="color: #666666">.</span>ColorRole<span style="color: #666666">.</span>Mid, border)
        palette<span style="color: #666666">.</span>setColor(QPalette<span style="color: #666666">.</span>ColorRole<span style="color: #666666">.</span>Dark, border)
        palette<span style="color: #666666">.</span>setColor(QPalette<span style="color: #666666">.</span>ColorRole<span style="color: #666666">.</span>Shadow, border<span style="color: #666666">.</span>darker(<span style="color: #666666">140</span>))
        app<span style="color: #666666">.</span>setPalette(palette)

        accent_hex <span style="color: #666666">=</span> accent<span style="color: #666666">.</span>name()
        text_hex <span style="color: #666666">=</span> text<span style="color: #666666">.</span>name()
        muted_hex <span style="color: #666666">=</span> muted<span style="color: #666666">.</span>name()
        border_hex <span style="color: #666666">=</span> border<span style="color: #666666">.</span>name()
        surface_hex <span style="color: #666666">=</span> surface<span style="color: #666666">.</span>name()
        window_hex <span style="color: #666666">=</span> window<span style="color: #666666">.</span>name()
        success_hex <span style="color: #666666">=</span> success<span style="color: #666666">.</span>name()
        warning_hex <span style="color: #666666">=</span> warning<span style="color: #666666">.</span>name()
        error_hex <span style="color: #666666">=</span> error<span style="color: #666666">.</span>name()

        stylesheet <span style="color: #666666">=</span> <span style="color: #BA2121">f&quot;&quot;&quot;</span>
<span style="color: #BA2121">            QWidget </span><span style="color: #AA5D1F; font-weight: bold">{{</span>
<span style="color: #BA2121">                background-color: </span><span style="color: #A45A77; font-weight: bold">{</span>window_hex<span style="color: #A45A77; font-weight: bold">}</span><span style="color: #BA2121">;</span>
<span style="color: #BA2121">                color: </span><span style="color: #A45A77; font-weight: bold">{</span>text_hex<span style="color: #A45A77; font-weight: bold">}</span><span style="color: #BA2121">;</span>
<span style="color: #BA2121">            </span><span style="color: #AA5D1F; font-weight: bold">}}</span>
<span style="color: #BA2121">            QFrame#turnCard </span><span style="color: #AA5D1F; font-weight: bold">{{</span>
<span style="color: #BA2121">                background-color: </span><span style="color: #A45A77; font-weight: bold">{</span>surface_hex<span style="color: #A45A77; font-weight: bold">}</span><span style="color: #BA2121">;</span>
<span style="color: #BA2121">                border-radius: 12px;</span>
<span style="color: #BA2121">                border: 1px solid </span><span style="color: #A45A77; font-weight: bold">{</span>border_hex<span style="color: #A45A77; font-weight: bold">}</span><span style="color: #BA2121">;</span>
<span style="color: #BA2121">            </span><span style="color: #AA5D1F; font-weight: bold">}}</span>
<span style="color: #BA2121">            QFrame#turnCard QLabel#turnMetadata </span><span style="color: #AA5D1F; font-weight: bold">{{</span>
<span style="color: #BA2121">                color: </span><span style="color: #A45A77; font-weight: bold">{</span>muted_hex<span style="color: #A45A77; font-weight: bold">}</span><span style="color: #BA2121">;</span>
<span style="color: #BA2121">            </span><span style="color: #AA5D1F; font-weight: bold">}}</span>
<span style="color: #BA2121">            QTextBrowser </span><span style="color: #AA5D1F; font-weight: bold">{{</span>
<span style="color: #BA2121">                background-color: </span><span style="color: #A45A77; font-weight: bold">{</span>surface_hex<span style="color: #A45A77; font-weight: bold">}</span><span style="color: #BA2121">;</span>
<span style="color: #BA2121">                border-radius: 10px;</span>
<span style="color: #BA2121">                border: 1px solid </span><span style="color: #A45A77; font-weight: bold">{</span>border_hex<span style="color: #A45A77; font-weight: bold">}</span><span style="color: #BA2121">;</span>
<span style="color: #BA2121">                padding: 8px;</span>
<span style="color: #BA2121">            </span><span style="color: #AA5D1F; font-weight: bold">}}</span>
<span style="color: #BA2121">            QPushButton, QToolButton </span><span style="color: #AA5D1F; font-weight: bold">{{</span>
<span style="color: #BA2121">                background-color: </span><span style="color: #A45A77; font-weight: bold">{</span>surface_hex<span style="color: #A45A77; font-weight: bold">}</span><span style="color: #BA2121">;</span>
<span style="color: #BA2121">                border: 1px solid </span><span style="color: #A45A77; font-weight: bold">{</span>border_hex<span style="color: #A45A77; font-weight: bold">}</span><span style="color: #BA2121">;</span>
<span style="color: #BA2121">                border-radius: 18px;</span>
<span style="color: #BA2121">                padding: 4px 12px;</span>
<span style="color: #BA2121">            </span><span style="color: #AA5D1F; font-weight: bold">}}</span>
<span style="color: #BA2121">            QPushButton:disabled, QToolButton:disabled </span><span style="color: #AA5D1F; font-weight: bold">{{</span>
<span style="color: #BA2121">                color: </span><span style="color: #A45A77; font-weight: bold">{</span>muted_hex<span style="color: #A45A77; font-weight: bold">}</span><span style="color: #BA2121">;</span>
<span style="color: #BA2121">                border-color: </span><span style="color: #A45A77; font-weight: bold">{</span>border_hex<span style="color: #A45A77; font-weight: bold">}</span><span style="color: #BA2121">;</span>
<span style="color: #BA2121">                background-color: </span><span style="color: #A45A77; font-weight: bold">{</span>surface_hex<span style="color: #A45A77; font-weight: bold">}</span><span style="color: #BA2121">;</span>
<span style="color: #BA2121">            </span><span style="color: #AA5D1F; font-weight: bold">}}</span>
<span style="color: #BA2121">            QPushButton:hover, QToolButton:hover </span><span style="color: #AA5D1F; font-weight: bold">{{</span>
<span style="color: #BA2121">                border-color: </span><span style="color: #A45A77; font-weight: bold">{</span>accent_hex<span style="color: #A45A77; font-weight: bold">}</span><span style="color: #BA2121">;</span>
<span style="color: #BA2121">            </span><span style="color: #AA5D1F; font-weight: bold">}}</span>
<span style="color: #BA2121">            QPushButton:pressed, QToolButton:pressed </span><span style="color: #AA5D1F; font-weight: bold">{{</span>
<span style="color: #BA2121">                background-color: </span><span style="color: #A45A77; font-weight: bold">{</span>accent_hex<span style="color: #A45A77; font-weight: bold">}</span><span style="color: #BA2121">;</span>
<span style="color: #BA2121">                color: #0b0d11;</span>
<span style="color: #BA2121">            </span><span style="color: #AA5D1F; font-weight: bold">}}</span>
<span style="color: #BA2121">            QPushButton#accent, QToolButton#accent </span><span style="color: #AA5D1F; font-weight: bold">{{</span>
<span style="color: #BA2121">                background-color: </span><span style="color: #A45A77; font-weight: bold">{</span>accent_hex<span style="color: #A45A77; font-weight: bold">}</span><span style="color: #BA2121">;</span>
<span style="color: #BA2121">                color: #0b0d11;</span>
<span style="color: #BA2121">                border: none;</span>
<span style="color: #BA2121">            </span><span style="color: #AA5D1F; font-weight: bold">}}</span>
<span style="color: #BA2121">            QPushButton#accent:hover, QToolButton#accent:hover </span><span style="color: #AA5D1F; font-weight: bold">{{</span>
<span style="color: #BA2121">                background-color: </span><span style="color: #A45A77; font-weight: bold">{</span>accent<span style="color: #666666">.</span>darker(<span style="color: #666666">110</span>)<span style="color: #666666">.</span>name()<span style="color: #A45A77; font-weight: bold">}</span><span style="color: #BA2121">;</span>
<span style="color: #BA2121">            </span><span style="color: #AA5D1F; font-weight: bold">}}</span>
<span style="color: #BA2121">            QLabel#statusPill </span><span style="color: #AA5D1F; font-weight: bold">{{</span>
<span style="color: #BA2121">                border-radius: 14px;</span>
<span style="color: #BA2121">                padding: 2px 10px;</span>
<span style="color: #BA2121">                border: 1px solid </span><span style="color: #A45A77; font-weight: bold">{</span>border_hex<span style="color: #A45A77; font-weight: bold">}</span><span style="color: #BA2121">;</span>
<span style="color: #BA2121">                background-color: </span><span style="color: #A45A77; font-weight: bold">{</span>surface_hex<span style="color: #A45A77; font-weight: bold">}</span><span style="color: #BA2121">;</span>
<span style="color: #BA2121">                color: </span><span style="color: #A45A77; font-weight: bold">{</span>muted_hex<span style="color: #A45A77; font-weight: bold">}</span><span style="color: #BA2121">;</span>
<span style="color: #BA2121">            </span><span style="color: #AA5D1F; font-weight: bold">}}</span>
<span style="color: #BA2121">            QLabel#statusPill[state=&quot;info&quot;] </span><span style="color: #AA5D1F; font-weight: bold">{{</span>
<span style="color: #BA2121">                background-color: </span><span style="color: #A45A77; font-weight: bold">{</span>accent_hex<span style="color: #A45A77; font-weight: bold">}</span><span style="color: #BA2121">;</span>
<span style="color: #BA2121">                color: #0b0d11;</span>
<span style="color: #BA2121">                border-color: </span><span style="color: #A45A77; font-weight: bold">{</span>accent_hex<span style="color: #A45A77; font-weight: bold">}</span><span style="color: #BA2121">;</span>
<span style="color: #BA2121">            </span><span style="color: #AA5D1F; font-weight: bold">}}</span>
<span style="color: #BA2121">            QLabel#statusPill[state=&quot;connected&quot;] </span><span style="color: #AA5D1F; font-weight: bold">{{</span>
<span style="color: #BA2121">                background-color: </span><span style="color: #A45A77; font-weight: bold">{</span>success_hex<span style="color: #A45A77; font-weight: bold">}</span><span style="color: #BA2121">;</span>
<span style="color: #BA2121">                color: #0b0d11;</span>
<span style="color: #BA2121">                border-color: </span><span style="color: #A45A77; font-weight: bold">{</span>success_hex<span style="color: #A45A77; font-weight: bold">}</span><span style="color: #BA2121">;</span>
<span style="color: #BA2121">            </span><span style="color: #AA5D1F; font-weight: bold">}}</span>
<span style="color: #BA2121">            QLabel#statusPill[state=&quot;warning&quot;] </span><span style="color: #AA5D1F; font-weight: bold">{{</span>
<span style="color: #BA2121">                background-color: </span><span style="color: #A45A77; font-weight: bold">{</span>warning_hex<span style="color: #A45A77; font-weight: bold">}</span><span style="color: #BA2121">;</span>
<span style="color: #BA2121">                color: #0b0d11;</span>
<span style="color: #BA2121">                border-color: </span><span style="color: #A45A77; font-weight: bold">{</span>warning_hex<span style="color: #A45A77; font-weight: bold">}</span><span style="color: #BA2121">;</span>
<span style="color: #BA2121">            </span><span style="color: #AA5D1F; font-weight: bold">}}</span>
<span style="color: #BA2121">            QLabel#statusPill[state=&quot;error&quot;] </span><span style="color: #AA5D1F; font-weight: bold">{{</span>
<span style="color: #BA2121">                background-color: </span><span style="color: #A45A77; font-weight: bold">{</span>error_hex<span style="color: #A45A77; font-weight: bold">}</span><span style="color: #BA2121">;</span>
<span style="color: #BA2121">                color: #0b0d11;</span>
<span style="color: #BA2121">                border-color: </span><span style="color: #A45A77; font-weight: bold">{</span>error_hex<span style="color: #A45A77; font-weight: bold">}</span><span style="color: #BA2121">;</span>
<span style="color: #BA2121">            </span><span style="color: #AA5D1F; font-weight: bold">}}</span>
<span style="color: #BA2121">            QListWidget#evidenceList </span><span style="color: #AA5D1F; font-weight: bold">{{</span>
<span style="color: #BA2121">                background-color: </span><span style="color: #A45A77; font-weight: bold">{</span>surface_hex<span style="color: #A45A77; font-weight: bold">}</span><span style="color: #BA2121">;</span>
<span style="color: #BA2121">                border-radius: 12px;</span>
<span style="color: #BA2121">                border: 1px solid </span><span style="color: #A45A77; font-weight: bold">{</span>border_hex<span style="color: #A45A77; font-weight: bold">}</span><span style="color: #BA2121">;</span>
<span style="color: #BA2121">                padding: 4px;</span>
<span style="color: #BA2121">            </span><span style="color: #AA5D1F; font-weight: bold">}}</span>
<span style="color: #BA2121">            QTreeWidget#corpusSelector </span><span style="color: #AA5D1F; font-weight: bold">{{</span>
<span style="color: #BA2121">                background-color: </span><span style="color: #A45A77; font-weight: bold">{</span>surface_hex<span style="color: #A45A77; font-weight: bold">}</span><span style="color: #BA2121">;</span>
<span style="color: #BA2121">                border-radius: 12px;</span>
<span style="color: #BA2121">                border: 1px solid </span><span style="color: #A45A77; font-weight: bold">{</span>border_hex<span style="color: #A45A77; font-weight: bold">}</span><span style="color: #BA2121">;</span>
<span style="color: #BA2121">            </span><span style="color: #AA5D1F; font-weight: bold">}}</span>
<span style="color: #BA2121">        &quot;&quot;&quot;</span>
        app<span style="color: #666666">.</span>setStyleSheet(stylesheet)
</code></pre>
<h3 id="apply_font_scale">Method: apply_font_scale(self, app: QApplication | None=None) -&gt; None</h3>
<p>The function `apply_font_scale` adjusts the application&#x27;s default font size based on a scaling factor defined in the settings. It retrieves the current application instance, obtains the default font, and calculates a base font point size if not already set. The font size is then scaled by multiplying the base size with the font scale factor from the settings, and the updated font is applied to the application. If no application instance is available, the function returns without making changes.</p>
<pre><code><span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">apply_font_scale</span>(<span style="color: #008000">self</span>, app: QApplication <span style="color: #666666">|</span> <span style="color: #008000; font-weight: bold">None</span> <span style="color: #666666">=</span> <span style="color: #008000; font-weight: bold">None</span>) <span style="color: #666666">-&gt;</span> <span style="color: #008000; font-weight: bold">None</span>:
<span style="color: #bbbbbb">        </span><span style="color: #BA2121; font-style: italic">&quot;&quot;&quot;Scale the application&#39;s default font according to settings.&quot;&quot;&quot;</span>

        app <span style="color: #666666">=</span> app <span style="color: #AA22FF; font-weight: bold">or</span> QApplication<span style="color: #666666">.</span>instance()
        <span style="color: #008000; font-weight: bold">if</span> app <span style="color: #AA22FF; font-weight: bold">is</span> <span style="color: #008000; font-weight: bold">None</span>:
            <span style="color: #008000; font-weight: bold">return</span>
        default_font <span style="color: #666666">=</span> QFont(app<span style="color: #666666">.</span>font())
        <span style="color: #008000; font-weight: bold">if</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>_base_font_point_size <span style="color: #AA22FF; font-weight: bold">is</span> <span style="color: #008000; font-weight: bold">None</span>:
            point_size <span style="color: #666666">=</span> default_font<span style="color: #666666">.</span>pointSizeF()
            <span style="color: #008000; font-weight: bold">if</span> point_size <span style="color: #666666">&lt;=</span> <span style="color: #666666">0</span>:
                point_size <span style="color: #666666">=</span> <span style="color: #008000">float</span>(default_font<span style="color: #666666">.</span>pointSize())
            <span style="color: #008000">self</span><span style="color: #666666">.</span>_base_font_point_size <span style="color: #666666">=</span> point_size <span style="color: #AA22FF; font-weight: bold">or</span> <span style="color: #666666">10.0</span>
        default_font<span style="color: #666666">.</span>setPointSizeF(<span style="color: #008000">self</span><span style="color: #666666">.</span>_base_font_point_size <span style="color: #666666">*</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>_settings<span style="color: #666666">.</span>font_scale)
        app<span style="color: #666666">.</span>setFont(default_font)
</code></pre>
<h2>Functions</h2>
<h3 id="_clamp">_clamp(value: float, *, low: float, high: float) -&gt; float</h3>
<p>The function `_clamp` takes a floating-point value and constrains it to lie within the inclusive range defined by `low` and `high`. It returns the value if it is between `low` and `high`, or returns `low` if the value is below `low`, or returns `high` if the value is above `high`. The function ensures the returned value is always within the specified bounds.</p>
<pre><code><span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">_clamp</span>(value: <span style="color: #008000">float</span>, <span style="color: #666666">*</span>, low: <span style="color: #008000">float</span>, high: <span style="color: #008000">float</span>) <span style="color: #666666">-&gt;</span> <span style="color: #008000">float</span>:
    <span style="color: #008000; font-weight: bold">return</span> <span style="color: #008000">float</span>(<span style="color: #008000">min</span>(high, <span style="color: #008000">max</span>(low, value)))
</code></pre>
    </div>
    <script src="static/toggle.js"></script>
</body>
</html>
