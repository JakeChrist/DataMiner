<!-- Generated by DocGen-LM -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>conversation_settings</title>
    <link rel="stylesheet" href="static/style.css">
</head>
<body>
    <button id="sidebar-toggle">Menu</button>
    <div class="sidebar">
        <h2>Navigation</h2>
        <ul><li><a href="index.html"><strong>üè† Project Overview</strong></a></li><li><details><summary>app</summary><ul><li><a href="__init__.html">__init__</a></li><li><a href="__main__.html">__main__</a></li><li><a href="config.html">config</a></li><li><a href="logging.html">logging</a></li><li><details><summary>ingest</summary><ul><li><a href="__init__.html">__init__</a></li><li><a href="preview.html">preview</a></li><li><a href="service.html">service</a></li><li><details><summary>parsers</summary><ul><li><a href="__init__.html">__init__</a></li><li><a href="docx_parser.html">docx_parser</a></li><li><a href="markdown_parser.html">markdown_parser</a></li><li><a href="pdf_parser.html">pdf_parser</a></li><li><a href="text_parser.html">text_parser</a></li></ul></details></li></ul></details></li><li><details><summary>retrieval</summary><ul><li><a href="__init__.html">__init__</a></li><li><a href="index.html">index</a></li><li><a href="search.html">search</a></li></ul></details></li><li><details><summary>services</summary><ul><li><a href="__init__.html">__init__</a></li><li><a href="backup_service.html">backup_service</a></li><li><a href="conversation_manager.html">conversation_manager</a></li><li><a href="conversation_settings.html">conversation_settings</a></li><li><a href="document_hierarchy.html">document_hierarchy</a></li><li><a href="export_service.html">export_service</a></li><li><a href="lmstudio_client.html">lmstudio_client</a></li><li><a href="progress_service.html">progress_service</a></li><li><a href="project_service.html">project_service</a></li><li><a href="settings_service.html">settings_service</a></li></ul></details></li><li><details><summary>storage</summary><ul><li><a href="__init__.html">__init__</a></li><li><a href="database.html">database</a></li></ul></details></li><li><details><summary>ui</summary><ul><li><a href="__init__.html">__init__</a></li><li><a href="answer_view.html">answer_view</a></li><li><a href="evidence_panel.html">evidence_panel</a></li><li><a href="main_window.html">main_window</a></li><li><a href="question_input_widget.html">question_input_widget</a></li></ul></details></li></ul></details></li><li><details><summary>tests</summary><ul><li><a href="test_dynamic_planning.html">test_dynamic_planning</a></li><li><a href="test_export_and_backup.html">test_export_and_backup</a></li><li><a href="test_ingest_service.html">test_ingest_service</a></li><li><a href="test_lmstudio_integration.html">test_lmstudio_integration</a></li><li><a href="test_parser_file_types.html">test_parser_file_types</a></li><li><a href="test_preview_service.html">test_preview_service</a></li><li><a href="test_project_service.html">test_project_service</a></li><li><a href="test_retrieval_index.html">test_retrieval_index</a></li><li><a href="test_search_service.html">test_search_service</a></li><li><a href="test_storage.html">test_storage</a></li><li><a href="test_ui_main_window.html">test_ui_main_window</a></li></ul></details></li></ul>
    </div>
    <div class="content">
        <h1>conversation_settings</h1>
        <p>Defines a `ConversationSettings` class that manages conversation-level preferences for a UI, including reasoning verbosity, plan and assumption visibility, sources-only mode, answer length, and model selection. The class emits signals when these settings change and provides properties with associated setter methods to update the values. It inherits from `QObject` to support Qt&#x27;s signal-slot mechanism. Settings are stored as private attributes and validated before updates. The `response_mode` property dynamically reflects whether sources-only mode is enabled.</p>
<h2 id="ConversationSettings">Class: ConversationSettings</h2>
<p>The `ConversationSettings` class manages conversation-level configuration options using Qt&#x27;s signal-slot mechanism to notify listeners of changes. It provides properties and setter methods for controlling reasoning verbosity, plan visibility, assumption visibility, sources-only mode, answer length, and model selection. The class emits specific signals whenever any of these settings are modified, enabling synchronization between the user interface and underlying request logic.</p>
<h3 id="__init__">Method: __init__(self) -&gt; None</h3>
<p>Initializes a `ConversationSettings` instance with default values for reasoning verbosity, plan visibility, assumption visibility, sources-only mode, answer length, and model name. Sets the model name to &quot;lmstudio&quot; by default.</p>
<pre><code><span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">__init__</span>(<span style="color: #008000">self</span>) <span style="color: #666666">-&gt;</span> <span style="color: #008000; font-weight: bold">None</span>:
        <span style="color: #008000">super</span>()<span style="color: #666666">.</span><span style="color: #0000FF">__init__</span>()
        <span style="color: #008000">self</span><span style="color: #666666">.</span>_reasoning_verbosity <span style="color: #666666">=</span> ReasoningVerbosity<span style="color: #666666">.</span>BRIEF
        <span style="color: #008000">self</span><span style="color: #666666">.</span>_show_plan <span style="color: #666666">=</span> <span style="color: #008000; font-weight: bold">True</span>
        <span style="color: #008000">self</span><span style="color: #666666">.</span>_show_assumptions <span style="color: #666666">=</span> <span style="color: #008000; font-weight: bold">True</span>
        <span style="color: #008000">self</span><span style="color: #666666">.</span>_sources_only_mode <span style="color: #666666">=</span> <span style="color: #008000; font-weight: bold">False</span>
        <span style="color: #008000">self</span><span style="color: #666666">.</span>_answer_length <span style="color: #666666">=</span> AnswerLength<span style="color: #666666">.</span>NORMAL
        <span style="color: #008000">self</span><span style="color: #666666">.</span>_model_name <span style="color: #666666">=</span> <span style="color: #BA2121">&quot;lmstudio&quot;</span>
</code></pre>
<h3 id="reasoning_verbosity">Method: reasoning_verbosity(self) -&gt; ReasoningVerbosity</h3>
<p>Returns the current reasoning verbosity setting.</p>
<pre><code><span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">reasoning_verbosity</span>(<span style="color: #008000">self</span>) <span style="color: #666666">-&gt;</span> ReasoningVerbosity:
        <span style="color: #008000; font-weight: bold">return</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>_reasoning_verbosity
</code></pre>
<h3 id="set_reasoning_verbosity">Method: set_reasoning_verbosity(self, verbosity: ReasoningVerbosity) -&gt; None</h3>
<p>The function `set_reasoning_verbosity` updates the reasoning verbosity level for conversation settings. It accepts a parameter of type `ReasoningVerbosity`, validates its type, and emits a signal when the value changes. If the new verbosity level is the same as the current one, the function returns without making changes.</p>
<pre><code><span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">set_reasoning_verbosity</span>(<span style="color: #008000">self</span>, verbosity: ReasoningVerbosity) <span style="color: #666666">-&gt;</span> <span style="color: #008000; font-weight: bold">None</span>:
        <span style="color: #008000; font-weight: bold">if</span> <span style="color: #AA22FF; font-weight: bold">not</span> <span style="color: #008000">isinstance</span>(verbosity, ReasoningVerbosity):
            <span style="color: #008000; font-weight: bold">raise</span> <span style="color: #CB3F38; font-weight: bold">TypeError</span>(<span style="color: #BA2121">&quot;verbosity must be a ReasoningVerbosity value&quot;</span>)
        <span style="color: #008000; font-weight: bold">if</span> verbosity <span style="color: #AA22FF; font-weight: bold">is</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>_reasoning_verbosity:
            <span style="color: #008000; font-weight: bold">return</span>
        <span style="color: #008000">self</span><span style="color: #666666">.</span>_reasoning_verbosity <span style="color: #666666">=</span> verbosity
        <span style="color: #008000">self</span><span style="color: #666666">.</span>reasoning_verbosity_changed<span style="color: #666666">.</span>emit(verbosity)
</code></pre>
<h3 id="show_plan">Method: show_plan(self) -&gt; bool</h3>
<p>The function `show_plan` is a getter method that returns the value of the private attribute `_show_plan`. This attribute likely controls whether a plan or outline is displayed within the application&#x27;s user interface. The method itself does not perform any operations beyond retrieving and returning the state of `_show_plan`.</p>
<pre><code><span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">show_plan</span>(<span style="color: #008000">self</span>) <span style="color: #666666">-&gt;</span> <span style="color: #008000">bool</span>:
        <span style="color: #008000; font-weight: bold">return</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>_show_plan
</code></pre>
<h3 id="set_show_plan">Method: set_show_plan(self, enabled: bool) -&gt; None</h3>
<p>The function `set_show_plan` is a method of the `ConversationSettings` class that updates the internal state `_show_plan` with the provided boolean value `enabled`. If the new value differs from the current value of `_show_plan`, it updates the state and emits a signal `show_plan_changed` with the new value. This function is used to control whether a plan should be displayed in the conversation settings.</p>
<pre><code><span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">set_show_plan</span>(<span style="color: #008000">self</span>, enabled: <span style="color: #008000">bool</span>) <span style="color: #666666">-&gt;</span> <span style="color: #008000; font-weight: bold">None</span>:
        value <span style="color: #666666">=</span> <span style="color: #008000">bool</span>(enabled)
        <span style="color: #008000; font-weight: bold">if</span> value <span style="color: #666666">==</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>_show_plan:
            <span style="color: #008000; font-weight: bold">return</span>
        <span style="color: #008000">self</span><span style="color: #666666">.</span>_show_plan <span style="color: #666666">=</span> value
        <span style="color: #008000">self</span><span style="color: #666666">.</span>show_plan_changed<span style="color: #666666">.</span>emit(value)
</code></pre>
<h3 id="show_assumptions">Method: show_assumptions(self) -&gt; bool</h3>
<p>The function `show_assumptions` is a getter method that returns the value of the private attribute `_show_assumptions`. This attribute likely controls whether assumptions or reasoning steps are displayed within the conversation settings of the application. The method itself does not perform any operations beyond retrieving and returning the value of `_show_assumptions`.</p>
<pre><code><span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">show_assumptions</span>(<span style="color: #008000">self</span>) <span style="color: #666666">-&gt;</span> <span style="color: #008000">bool</span>:
        <span style="color: #008000; font-weight: bold">return</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>_show_assumptions
</code></pre>
<h3 id="set_show_assumptions">Method: set_show_assumptions(self, enabled: bool) -&gt; None</h3>
<p>The function `set_show_assumptions` is a method of the `ConversationSettings` class that updates the internal state of whether assumptions should be displayed in the user interface. It accepts a boolean parameter `enabled`, converts it to a boolean type, and if the new value differs from the current `_show_assumptions` attribute, it updates the attribute and emits a signal `show_assumptions_changed` with the new value.</p>
<pre><code><span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">set_show_assumptions</span>(<span style="color: #008000">self</span>, enabled: <span style="color: #008000">bool</span>) <span style="color: #666666">-&gt;</span> <span style="color: #008000; font-weight: bold">None</span>:
        value <span style="color: #666666">=</span> <span style="color: #008000">bool</span>(enabled)
        <span style="color: #008000; font-weight: bold">if</span> value <span style="color: #666666">==</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>_show_assumptions:
            <span style="color: #008000; font-weight: bold">return</span>
        <span style="color: #008000">self</span><span style="color: #666666">.</span>_show_assumptions <span style="color: #666666">=</span> value
        <span style="color: #008000">self</span><span style="color: #666666">.</span>show_assumptions_changed<span style="color: #666666">.</span>emit(value)
</code></pre>
<h3 id="sources_only_mode">Method: sources_only_mode(self) -&gt; bool</h3>
<p>The function `sources_only_mode` is a property method within the `ConversationSettings` class that returns the value of the private attribute `_sources_only_mode`. This attribute likely controls whether the conversation system operates in a mode that restricts responses to sources only, without additional generated content.</p>
<pre><code><span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">sources_only_mode</span>(<span style="color: #008000">self</span>) <span style="color: #666666">-&gt;</span> <span style="color: #008000">bool</span>:
        <span style="color: #008000; font-weight: bold">return</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>_sources_only_mode
</code></pre>
<h3 id="set_sources_only_mode">Method: set_sources_only_mode(self, enabled: bool) -&gt; None</h3>
<p>The function `set_sources_only_mode` configures the conversation settings to enable or disable &quot;sources only&quot; mode. It accepts a boolean parameter `enabled` and updates the internal `_sources_only_mode` attribute if the value differs from the current setting. When the setting changes, it emits the `sources_only_mode_changed` signal with the new boolean value.</p>
<pre><code><span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">set_sources_only_mode</span>(<span style="color: #008000">self</span>, enabled: <span style="color: #008000">bool</span>) <span style="color: #666666">-&gt;</span> <span style="color: #008000; font-weight: bold">None</span>:
        value <span style="color: #666666">=</span> <span style="color: #008000">bool</span>(enabled)
        <span style="color: #008000; font-weight: bold">if</span> value <span style="color: #666666">==</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>_sources_only_mode:
            <span style="color: #008000; font-weight: bold">return</span>
        <span style="color: #008000">self</span><span style="color: #666666">.</span>_sources_only_mode <span style="color: #666666">=</span> value
        <span style="color: #008000">self</span><span style="color: #666666">.</span>sources_only_mode_changed<span style="color: #666666">.</span>emit(value)
</code></pre>
<h3 id="response_mode">Method: response_mode(self) -&gt; ResponseMode</h3>
<p>The function `response_mode` defines a property that returns a `ResponseMode` enum value. It evaluates the boolean attribute `_sources_only_mode` and returns `ResponseMode.SOURCES_ONLY` if `_sources_only_mode` is `True`, otherwise it returns `ResponseMode.GENERATIVE`.</p>
<pre><code><span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">response_mode</span>(<span style="color: #008000">self</span>) <span style="color: #666666">-&gt;</span> ResponseMode:
        <span style="color: #008000; font-weight: bold">return</span> (
            ResponseMode<span style="color: #666666">.</span>SOURCES_ONLY
            <span style="color: #008000; font-weight: bold">if</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>_sources_only_mode
            <span style="color: #008000; font-weight: bold">else</span> ResponseMode<span style="color: #666666">.</span>GENERATIVE
        )
</code></pre>
<h3 id="answer_length">Method: answer_length(self) -&gt; AnswerLength</h3>
<p>The function `answer_length` is a property method within the `ConversationSettings` class that returns the value of the private attribute `_answer_length`, which is of type `AnswerLength`. This method provides read-only access to the answer length setting.</p>
<pre><code><span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">answer_length</span>(<span style="color: #008000">self</span>) <span style="color: #666666">-&gt;</span> AnswerLength:
        <span style="color: #008000; font-weight: bold">return</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>_answer_length
</code></pre>
<h3 id="set_answer_length">Method: set_answer_length(self, preset: AnswerLength) -&gt; None</h3>
<p>The function `set_answer_length` sets the answer length preset for the conversation settings. It validates that the provided `preset` is an instance of the `AnswerLength` enum, and if the new value differs from the current one, it updates the internal `_answer_length` attribute and emits an `answer_length_changed` signal with the new preset value.</p>
<pre><code><span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">set_answer_length</span>(<span style="color: #008000">self</span>, preset: AnswerLength) <span style="color: #666666">-&gt;</span> <span style="color: #008000; font-weight: bold">None</span>:
        <span style="color: #008000; font-weight: bold">if</span> <span style="color: #AA22FF; font-weight: bold">not</span> <span style="color: #008000">isinstance</span>(preset, AnswerLength):
            <span style="color: #008000; font-weight: bold">raise</span> <span style="color: #CB3F38; font-weight: bold">TypeError</span>(<span style="color: #BA2121">&quot;preset must be an AnswerLength value&quot;</span>)
        <span style="color: #008000; font-weight: bold">if</span> preset <span style="color: #AA22FF; font-weight: bold">is</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>_answer_length:
            <span style="color: #008000; font-weight: bold">return</span>
        <span style="color: #008000">self</span><span style="color: #666666">.</span>_answer_length <span style="color: #666666">=</span> preset
        <span style="color: #008000">self</span><span style="color: #666666">.</span>answer_length_changed<span style="color: #666666">.</span>emit(preset)
</code></pre>
<h3 id="model_name">Method: model_name(self) -&gt; str</h3>
<p>The function `model_name` is a property getter in the `ConversationSettings` class that returns the value of the private attribute `_model_name`.</p>
<pre><code><span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">model_name</span>(<span style="color: #008000">self</span>) <span style="color: #666666">-&gt;</span> <span style="color: #008000">str</span>:
        <span style="color: #008000; font-weight: bold">return</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>_model_name
</code></pre>
<h3 id="set_model_name">Method: set_model_name(self, name: str) -&gt; None</h3>
<p>The function `set_model_name` updates the model name stored in the `ConversationSettings` instance. It takes a string input, strips whitespace, and if the resulting string is non-empty and different from the currently stored model name, it updates the internal `_model_name` attribute and emits a `model_changed` signal with the new name. If the input is empty or unchanged, the function performs no action.</p>
<pre><code><span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">set_model_name</span>(<span style="color: #008000">self</span>, name: <span style="color: #008000">str</span>) <span style="color: #666666">-&gt;</span> <span style="color: #008000; font-weight: bold">None</span>:
        cleaned <span style="color: #666666">=</span> <span style="color: #008000">str</span>(name)<span style="color: #666666">.</span>strip()
        <span style="color: #008000; font-weight: bold">if</span> <span style="color: #AA22FF; font-weight: bold">not</span> cleaned:
            <span style="color: #008000; font-weight: bold">return</span>
        <span style="color: #008000; font-weight: bold">if</span> cleaned <span style="color: #666666">==</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>_model_name:
            <span style="color: #008000; font-weight: bold">return</span>
        <span style="color: #008000">self</span><span style="color: #666666">.</span>_model_name <span style="color: #666666">=</span> cleaned
        <span style="color: #008000">self</span><span style="color: #666666">.</span>model_changed<span style="color: #666666">.</span>emit(cleaned)
</code></pre>
    </div>
    <script src="static/toggle.js"></script>
</body>
</html>
